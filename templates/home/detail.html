{% extends 'base.html' %}
{% load static %}
{% block content %}
<br>
<br>
<br>
<br>
<br>
<!-- Banner -->
{% if course.banner and course.banner.url %}
    <img src="{{ course.banner.url }}" alt="{{ course.course_name }} Banner" class="course-banner">
{% else %}
    <img src="{% static 'default-banner.jpg' %}" alt="Default Banner" class="course-banner">
{% endif %}
<style>
.course-banner {
    width: 100%;
    height: auto;
    max-height: 400px;
    object-fit: cover;
    display: block;
    border-radius: 0;
    margin: 0 auto 30px auto;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

@media screen and (max-width: 768px) {
    .course-banner {
        max-height: 250px;
    }
}

@media screen and (max-width: 480px) {
    .course-banner {
        max-height: 180px;
    }
}
</style>
<section class="curriculum">
    {% if course %}
        <div class="sidebarrr">
            <h2 class="white">{{ course.course_name }}</h2>
            <p class="white">{{ course.course_desc }}</p>
            {% if course.image and course.image.url %}
                <img src="{{ course.image.url|default_if_none:'/static/default.jpg' }}" alt="Course Image" class="course-image">
            {% endif %}
            <ul>
                <li class="white"><strong class="white">30+</strong> Case Studies & Projects</li>
                <li class="white"><strong class="white">10+</strong> Languages & Tools</li>
                <li class="white"><strong class="white">280+</strong> Live Sessions Hours</li>
            </ul>
            {% comment %} <a href="{% url 'broucher' course.id %}" style="text-decoration:none;">
                <button class="brochure-btn">ðŸ“„ Download Brochure</button>
            </a> {% endcomment %}
        </div>

        <div class="course-contenttt">
            {% for item in tech_with_topics %}
            <div class="module" onclick="toggleModule(this)">
                <h3 class="white">
                    {{ item.tech.tech_name }}
                </h3>
                <ul class="details" style="display: none; opacity: 0; color:white;">
                    {% for topic in item.topics %}
                        <li>{{ topic.topic_name }}</li>
                    {% empty %}
                        <li>No topics available</li>
                    {% endfor %}
                </ul>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <p style="color: red;">Course data not found!</p>
    {% endif %}
</section>

<script>
function toggleModule(module) {
    let details = module.querySelector(".details");

    if (details.style.display === "block") {
        details.style.opacity = "0";
        details.style.maxHeight = "0px";
        setTimeout(() => { details.style.display = "none"; }, 300);
    } else {
        details.style.display = "block";
        setTimeout(() => {
            details.style.opacity = "1";
            details.style.maxHeight = "200px";
        }, 50);
    }
}
</script>
{% endblock %}